# Customer Churn Analysis Dashboard

## Overview

This project provides a comprehensive Power BI dashboard for analyzing customer churn in the banking sector. The dashboard helps business stakeholders quickly understand churn trends, identify high-risk customers, and explore key drivers behind churn.

## Power BI Dashboard Structure

### ðŸ“Š Home Overview Page

- **KPI Cards**: Total Customers, Churn Rate (%), Retained Customers, Revenue Lost Due to Churn
- **Trend Visualization**: Line chart showing Churn Trend Over Time (monthly)
- **Distribution Chart**: Donut chart showing Churn vs Retention proportion

### ðŸ‘¤ Customer Segmentation Page

- **Demographic Analysis**: Bar chart showing Churn Rate by Demographic Segments (gender, age group)
- **Contract Analysis**: Stacked bar chart for Churn by Contract Type
- **Interactive Filters**: Slicers for region, tenure range, and service type

### ðŸ§  Churn Prediction Insights Page

- **Risk Assessment**: Table of customers with conditional formatting (red/yellow/green) based on churn probability
- **Feature Importance**: Bar chart of Top 10 Features Driving Churn
- **High-Risk Focus**: Highlight customers with probability > 0.7

### ðŸ“ˆ Financial Impact Page

- **Revenue Metrics**: KPI for Estimated Revenue Loss due to churn
- **Segment Analysis**: Bar chart showing revenue lost by segment
- **What-If Analysis**: Parameter slider to simulate impact of reducing churn by X%

## Files in This Repository

### Data Files

- `botswana_bank_customer_churn.csv`: Original customer churn dataset
- `preprocessed_churn_data.csv`: Cleaned and preprocessed data ready for analysis
- `customer_data_for_powerbi.csv`: Customer data formatted for Power BI with churn probabilities
- `feature_importance_for_powerbi.csv`: Feature importance data for visualization

### Power BI Resources

- `powerbi_data_structure.md`: Detailed guide on structuring data for Power BI dashboard
- `powerbi_dashboard_summary.md`: Summary of the Power BI dashboard implementation
- `churn_dashboard_template.pbit`: Template file for Power BI dashboard (see guide for implementation)
- `prepare_data_for_powerbi.py`: Python script to prepare data from our model for Power BI

### Model and Application

- `target_range_random_forest_model.pkl`: Trained machine learning model with target accuracy range
- `enhanced_churn_dashboard.py`: Streamlit application for interactive churn prediction

### Documentation

- `README.md`: This file with project overview and instructions

## Preparing Data for Power BI

This repository includes a Python script that prepares the data for Power BI visualization:

1. **Customer Data**: The script takes the preprocessed data and adds:

   - Churn probabilities from our trained model
   - Customer segmentation fields (age groups, tenure groups)
   - Simulated business fields (monthly charges, revenue, contract type, etc.)

2. **Feature Importance**: Extracts feature importance from our trained model for visualization

To run the data preparation script:

```bash
python prepare_data_for_powerbi.py
```

This will generate:

- `customer_data_for_powerbi.csv`: Main dataset for dashboard
- `feature_importance_for_powerbi.csv`: Supporting data for feature importance visualization

## Data Preparation for Power BI

To create this dashboard, you'll need to prepare your data with the following columns:

### Required Columns

- `CustomerID`: Unique identifier for each customer
- `Churn`: Binary indicator (Yes/No or 1/0)
- `Churn_Probability`: Probability score from ML model (0-1)
- `Gender`: Customer gender
- `Age`: Customer age
- `Tenure`: Months/Years with the bank
- `MonthlyCharges`: Monthly service charges
- `ContractType`: Contract type (Month-to-month, One year, Two year)
- `PaymentMethod`: Customer payment method
- `Region`: Customer location/region
- `Revenue`: Revenue generated by customer

### Feature Importance Data

Create a separate table with:

- `Feature`: Name of feature
- `Importance`: Importance score (0-100)

## Implementation Steps

### 1. Data Import

1. Load the primary customer dataset
2. Load the feature importance data
3. Establish relationships between tables

### 2. Home Overview Page

1. Create KPI cards with appropriate formatting
2. Build churn trend line chart with time dimension
3. Design churn distribution donut chart
4. Add company branding and title

### 3. Customer Segmentation Page

1. Create demographic bar charts
2. Build contract type stacked bar chart
3. Add interactive slicers for filtering
4. Implement drill-through capabilities

### 4. Churn Prediction Insights Page

1. Create customer risk table with conditional formatting
2. Build feature importance bar chart
3. Add high-risk customer filter
4. Include detailed tooltips

### 5. Financial Impact Page

1. Calculate revenue loss metrics
2. Create revenue loss by segment visualization
3. Implement what-if parameter for scenario analysis
4. Add financial impact summary

## Design Guidelines

### Visual Design

- **Color Scheme**:
  - Primary: Navy Blue (#1a3c7c)
  - Secondary: Green (#4CAF50) for positive metrics
  - Alert: Red (#f44336) for high-risk/churn
  - Neutral: Light gray backgrounds (#f8f9fa)
- **Typography**: Consistent use of sans-serif fonts
- **Layout**: Clean, modern design with ample white space

### Interactivity

- **Slicers**: Tenure, region, and contract type filters on sidebar
- **Tooltips**: Detailed explanations for all data points
- **Drill-through**: Ability to drill from summary to detail views
- **Bookmarks**: Page navigation for seamless user experience

## Required Power BI Features

### Visualizations

- Card visuals for KPIs
- Line and area charts for trends
- Donut/pie charts for distributions
- Bar/column charts for comparisons
- Table/matrix for detailed data
- Slicers for filtering

### DAX Calculations

Key measures to implement:

- Churn Rate = COUNT(Churn = "Yes") / COUNT(Rows)
- Retained Customers = COUNT(Churn = "No")
- Revenue Lost = SUM(Revenue) for churned customers
- Churn Risk Categories (High/Medium/Low based on probability)

## Implementation Tips

1. **Data Modeling**: Ensure proper relationships between tables
2. **Performance**: Use aggregations for large datasets
3. **Security**: Implement row-level security if needed
4. **Publishing**: Set up auto-refresh for real-time data updates
5. **Documentation**: Include tooltips and instructions for end users

## Dashboard Benefits

This dashboard provides:

- Executive-ready insights for decision making
- Interactive exploration of churn factors
- Financial impact quantification
- Predictive analytics integration
- User-friendly interface for non-technical stakeholders

## Next Steps

1. Import your customer data into Power BI
2. Follow the page structure outlined above
3. Apply the design guidelines for visual consistency
4. Test with business stakeholders for feedback
5. Deploy to Power BI Service for organization access

## Running the Streamlit Dashboard

In addition to the Power BI dashboard, this repository includes a Python-based interactive dashboard:

1. Install required packages:

   ```
   pip install -r requirements.txt
   pip install -r app_requirements.txt
   ```

2. Run the Streamlit application:

   ```
   streamlit run enhanced_churn_dashboard.py
   ```

3. Access the dashboard at http://localhost:8501

The Streamlit dashboard provides real-time churn predictions based on customer data input and the trained machine learning model.
